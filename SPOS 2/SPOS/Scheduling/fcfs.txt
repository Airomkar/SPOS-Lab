#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    int n;
    cout << "Enter number of processes: ";
    cin >> n;

    vector<int> pid(n);        // Process IDs
    vector<int> bt(n);         // Burst Times
    vector<int> at(n);         // Arrival Times
    vector<int> wt(n);         // Waiting Times
    vector<int> tat(n);        // Turnaround Times
    vector<int> ct(n);         // Completion Times

    // Input process details
    for (int i = 0; i < n; i++) {
        cout << "\nEnter details for Process " << i + 1 << ":\n";
        cout << "Process ID: ";
        cin >> pid[i];
        cout << "Arrival Time: ";
        cin >> at[i];
        cout << "Burst Time: ";
        cin >> bt[i];
    }

    // Sort processes by arrival time
    vector<pair<int, int>> order; // {arrivalTime, index}
    for (int i = 0; i < n; i++) order.push_back({at[i], i});
    sort(order.begin(), order.end());

    int currentTime = 0;
    float totalWT = 0, totalTAT = 0;

    cout << "\nProcess\tAT\tBT\tCT\tTAT\tWT\n";
    for (int i = 0; i < n; i++) {
        int idx = order[i].second;

        // CPU idle until process arrives
        if (currentTime < at[idx])
            currentTime = at[idx];

        currentTime += bt[idx];
        ct[idx] = currentTime;               // Completion Time
        tat[idx] = ct[idx] - at[idx];        // Turnaround Time
        wt[idx] = tat[idx] - bt[idx];        // Waiting Time

        totalWT += wt[idx];
        totalTAT += tat[idx];

        cout << "P" << pid[idx] << "\t"
             << at[idx] << "\t"
             << bt[idx] << "\t"
             << ct[idx] << "\t"
             << tat[idx] << "\t"
             << wt[idx] << "\n";
    }

    cout << "\nAverage Waiting Time: " << totalWT / n;
    cout << "\nAverage Turnaround Time: " << totalTAT / n << endl;

    return 0;
}
